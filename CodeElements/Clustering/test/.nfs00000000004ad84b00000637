set design "ariane"
set top_design "ariane"
set netlist "./design/ariane.v"
# def file generated by iSpatial flow
# where all the instances have been placed
set def_file "./design/ariane.def"


set ALL_LEFS "
    ./lefs/NangateOpenCellLibrary.tech.lef 
    ./lefs/NangateOpenCellLibrary.macro.mod.lef 
    ./lefs/fakeram45_256x16.lef
    "

set LIB_BC "
    ./libs/NangateOpenCellLibrary_typical.lib 
    ./libs/fakeram45_256x16.lib
    "

set site "FreePDK45_38x28_10R_NP_162NW_34O"

foreach lef_file ${ALL_LEFS} {
	read_lef $lef_file
}

foreach lib_file ${LIB_BC} {
	read_liberty $lib_file
}


#######################################################################
### Author:  Zhiang, May, 2022
### Uses OpenROAD API to convert the netlist to a hypergraph (in hemtis format)
### This file cannot be used directly.  It will be called by
### generate_cluster.py
### All the parameters set here are meaningless.  
### !!! Please don't touch this file !!!
########################################################################

#read_verilog $netlist
#link_design $top_design
#read_sdc $sdc

read_def  $def_file
#read_sdc $sdc



#Generate the hypergraph
partition_design -max_num_inst 2000000 -min_num_inst 40000 \
                 -max_num_macro 12 -min_num_macro 4 \
                 -net_threshold 20  -virtual_weight 50 \
                 -num_hop 0 -timing_weight 1000 \
                 -report_file ${top_design}.hgr
exit
